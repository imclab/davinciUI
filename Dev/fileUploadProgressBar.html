<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Progressbar</title>
		<link href="css/smoothness/jquery-ui-1.9.2.custom.css" rel="stylesheet">
		<script src="js/jquery-1.8.3.js"></script>
		<script src="js/jquery-ui-1.9.2.custom.js"></script>
		<style>
		#file {
			float: left;
		}
		#myProgressbar.ui-progressbar {
			height: 1em; width:221px; margin:3px 0 0 4px; float:left;
		}
		#filename {
			float: left; margin: 4px 0 0 10px; font-family:Verdana;
			font-size:12px;
		}
		</style>
</head>
<body>
	<h2> AJAX File Uploader</h2>
	<input type="file" id="file" />
	<div id="myProgressbar"></div>
	<script>
	(function($) {
		var prog = $("#myProgressbar"),
		inputFile = $("#file"),
		progressOpt = {
			complete: function() {
				$("filename").text("Complete");
			}

		}
		inputFile.change(function() {
			prog.progressbar(progressOpt);
			var files = inputFile.attr("files");
			file = files[0];
			xhr = new XMLHttpRequest();
			xhr.upload.onprogress = function updateProgress(e) {
				var loaded = (e.loaded / e.total);
				prog.Progressbar("value", Math.round(loaded * 100));
			}
			xhr.upload.onload = function () {
				prog.progressbar("value", 100);
			}
			$("<span></span>", {
				id:"filename",
				text: file.fileName
			}).insertAfter(prog);
			xhr.open("POST", "something.php");
			xhr.sendAsBinary(file.getAsBinary());


		});
	}) (jQuery);
	
</script>

</body>
</html>